/**
 * Bff.Publicator.Frontend.js (bff\db\Publicator component)
 * @author Tamaranga | tamaranga.com
 * @version 1.00
 * @modified 14.nov.2016
 */
var bffPublicatorFrontend=function(){function e(e,o){function r(){var e=!1,t="",l=[];if($(".j-publicator-data > div",L).each(function(o){var r=[];$(">div",this).each(function(){var e=$(this),t=e.attr("class");!S||"text"!=t&&"inline_text"!=t?r[t]=e.html():(r[t]={},e.find(">div").each(function(){r[t][$(this).attr("class")]=$(this).html()}))});var s=intval(r.type),d="";switch(s){case i.text:case i.quote:d='<div class="col-sm-9">'+c(s,C,a.lang.text_tip,r.text,a.useWY?"hidden wy":"")+"</div>",t+=n(s,d,!0,!0,!0);break;case i.textmd:d='<div class="col-sm-9">'+c(s,C,a.lang.text_tip,r.text,"form-control j-no-wy")+"</div>",t+=n(s,d,!0,!0,!0);break;case i.photo:d='<div class="col-sm-2 publicator-photo"><img src="'+r.url_t+'" alt="" /></div><div class="col-sm-7"><div class="publicator-photo-description">'+c(s,C,a.lang.photo_tip,r.text,a.wyPhotos?"hidden wy":"")+'</div></div><input type="hidden" name="'+p(s,C,!1)+'" class="j-photo-content" value="'+r.photo+'" /><input type="hidden" name="'+p(!1,C,"view")+'"  value="'+r.view+'" />',t+=n(s,d,!0,!0,!0);break;case i.gallery:var o=C,v=$.parseJSON(r.photos),u=[],m="",f=1,h="",g="";for(var j in v)m=v[j].photo,u.push(m),h+='<div class="publicator-gallery-item j-gallery-image" data-id="'+f+'"><div class="row"><div class="col-sm-2 publicator-photo"><img src="'+v[j].url.t+'" alt="" /></div><div class="col-sm-10"><div class="publicator-photo-description">'+c(s,o,a.lang.photo_tip,v[j].text,"",{fieldnameExtra:"[p]["+f+"]"})+'</div><a href="#" class="ajax-link link-delete j-gallery-delete"><i class="fa fa-times"></i> <span>'+a.lang["delete"]+'</span></a></div><input type="hidden" name="'+p(s,o,!1,"[p]["+f+"]")+'" class="j-photo-content" value="'+m+'" /></div></div>',g+='<li><img src="'+v[j].url.t+'" /></li>',f++;d='<div class="col-sm-9 j-view"><ul class="publicator-gallery-list">'+g+'</ul></div><div class="col-sm-9 publicator-gallery j-gallery-sortable j-edit hidden">'+h+'<a class="btn btn-primary btn-sm j-upload-button" href="javascript:;">'+a.lang.photo_add+"</a></div>",t+=n(s,d,!0,!0,!0),Y[o]={uploader:!1,photos:u,data:v,edit:!1,items:null,id_start:f,dnd:!1,dyn:!1,bytesTotal:!1,uploaded:u.length},e=!0;break;case i.video:d='<div class="col-sm-9">'+b(r.video,r.source,C,r)+"</div>",t+=n(s,d,!1,!1,!0);break;case i.subtitle:d='<div class="col-sm-9"><div class="row"><div class="col-sm-10">'+c(s,C,a.lang.subtitle_tip,r.text,"form-control no-enter j-no-wy")+'</div><div class="col-sm-2">'+y("subtitle-size",C,r.size)+"</div></div></div>",t+=n(s,d,!0,!1,!0);break;case i.map:d='<div class="col-sm-9"><div class="row"><div class="col-sm-9">'+c(s,C,a.lang.map_tip,r.text,"form-control no-enter j-no-wy j-map-addr")+'</div><div class="col-sm-3"><a href="javascript:;" class="btn btn-default btn-block j-map-search">'+a.lang.map_search+'</a></div></div><div class="l-mapView mrgt15 mrgb0"><div class="map-google j-map-container" style="height: 350px;"></div></div></div><input type="hidden" name="'+(H+"[b]["+C+"][lat]")+'" class="j-map-lat" value="'+r.lat+'"><input type="hidden" name="'+(H+"[b]["+C+"][lon]")+'" class="j-map-lon" value="'+r.lon+'">',l.push(C),t+=n(s,d,!0,!1,!0)}}),x.html(t),$(".j-block textarea",L).each(function(e,t){$(t).height(0),$(t).innerHeight(t.scrollHeight>0?t.scrollHeight:20)}),l.length)for(var o in l)k(l[o])}function n(e,t,i,l,o){var r=C++;i===!0&&(t+=p(e,r,"type"));var n='<div class="publicator-element j-block j-pblock-'+r+'" data-id="'+r+'" data-type="'+e+'"><div class="publicator-add j-block-add"><span>'+a.lang.insert+'</span></div> <div class="form-group"> <div class="col-sm-3 control-label"><div class="publicator-controls"><ul> <li><a href="#" class="j-block-up"><i class="fa fa-chevron-up"></i></a></li> <li><a href="#" class="j-block-down"><i class="fa fa-chevron-down"></i></a></li> <li><a href="#" class="link-delete j-block-delete"><i class="fa fa-times"></i></a></li> '+(l?'<li><a href="#" class="j-block-edit"><i class="fa fa-edit"></i></a></li> ':"")+'</ul><div class="clearfix"></div></div></div>'+t+"</div></div>";return o===!0?n:(z?d(z).before(n):x.append(n),j(!0),r)}function s(e,t){e.animate({opacity:"toggle",height:"toggle"},600,function(){t?e.addClass("hidden"):e.remove()}),j(!0)}function d(e){return x.find(".j-pblock-"+e)}function c(e,t,l,o,r,n,s){if(s=s||"",n=n||{},S&&e!=i.video&&!s.length){if(!$.isPlainObject(o)&&o.length>0&&0==o.indexOf("{")&&(o=$.parseJSON(o)),!$.isPlainObject(o)){o={};for(var d in a.langs)o[a.langs[d]]=""}var v="";for(var d in a.langs){var u=a.langs[d];v+='<div class="'+u+(P!=u?" hidden":"")+'">'+c(e,t,l,o[u],r,n,u)+"</div>"}return v}o=o||"";var m=!o.length;r=r||"form-control";var f="";switch(e){case i.map:case i.title:case i.subtitle:f+="resize:none;",m&&(f+="height:"+a.textHeight+"px;");break;case i.photo:case i.gallery:r+=" photo",f+=" width:100%;";break;case i.text:f+=" width:99%;";break;case i.textmd:f+=" width:99%; min-height:60px;"}var h=p(e===i.title?i.title:i.text,t,!1,n.hasOwnProperty("fieldnameExtra")?n.fieldnameExtra:"");n.hasOwnProperty("fieldname")&&(h=n.fieldname);var v='<textarea name="'+h+(""!=s?"["+s+"]":"")+'" id="publicator-text-'+t+(""!=s?"-"+s:"")+'" '+(r.length?' class="'+r+'"':"")+(""!=f?' style="'+f+'"':"")+' placeholder="'+l+'">'+o+"</textarea>";return a.useWY&&(e==i.photo&&a.wyPhotos||e==i.text||e==i.quote)&&(v+='<div class="text-to-wy'+(e==i.quote?" quote":"")+(m?" tip":"")+'">'+o+(m?l:"")+"</div>"),v}function p(e,t,a,l){if(a=a||!1,l=l||"",a)return"type"==a||"del"==a?'<input type="hidden" name="'+H+"[b]["+t+"]"+l+"["+a+']" value="'+e+'" />':H+"[b]["+t+"]"+l+"["+a+"]";switch(e){case i.title:return H+"[t]";case i.text:return H+"[b]["+t+"]"+l+"[text]";case i.textmd:return H+"[b]["+t+"]"+l+"[text]";case i.quote:return H+"[b]["+t+"]"+l+"[text]";case i.photo:return H+"[b]["+t+"]"+l+"[photo]";case i.gallery:return H+"[b]["+t+"]"+l+"[photo]";case i.video:return H+"[b]["+t+"]"+l+"[video]"}return""}function v(e){e=$(e);var t=e.closest(".j-block"),i=intval(t.data("id"));t.find(".tip,.text-to-wy").addClass("hidden"),E[i]=e.bffWysiwyg({controls_hide:["fullscreen","indent","outdent","fontSize","fontColor","blockquote","html"],reformator:a.useReformator},!0),E[i].focus(!0)}function u(e,t,l){switch(t){case"start":var o=C,r='<div class="col-sm-2 publicator-photo j-photo-img"><div class="publicator-photo-progress"><img src="'+a.loader+'" alt="" /></div></div><div class="col-sm-7"><div class="publicator-photo-description">'+c(i.photo,o,a.lang.photo_tip,"")+p(i.photo,o,"type")+"</div></div>";n(i.photo,r),W[e]={i:o,block:d(o)};var u=$("textarea:visible",W[e].block);a.wyPhotos?v(u):u.focus(),z=!1,L.triggerHandler("event-controls-back");break;case"preview":var m=W[e];m.block.find(".j-photo-img").html('<img src="'+l.t+'" alt="" />'),m.block.append('<input type="hidden" name="'+p(i.photo,m.i,!1)+'" class="j-photo-content" value="'+l.filename+'" />').append('<input type="hidden" name="'+p(!1,m.i,"view")+'"  value="'+l.view+'" />'),q.push([l.filename,i.photo]);break;case"remove":s(W[e].block)}}function m(e){var l=Y[e],o=d(e);l.uploader=new qq.FileUploaderBasic({button:o.find(".j-upload-button").get(0),limit:a.m.gallery_photos_limit,sizeLimit:a.upload.maxSize,uploaded:l.uploaded,action:a.url+"img_upload&id="+a.id+"&block_type="+i.gallery,multiple:!0,allowedExtensions:["jpeg","jpg","png","gif"],onSubmit:function(t){return f(e,t+l.id_start,"start",!1)},onComplete:function(a,i,o){return o&&o.success?f(e,a+l.id_start,"preview",o):o.errors&&(t(o.errors),f(e,a+l.id_start,"remove")),!0},onCancel:function(t){f(e,t+l.id_start,"remove")},showMessage:function(e){t(e)},messages:{typeError:a.lang.upload_typeError,sizeError:a.lang.upload_sizeError,minSizeError:a.lang.upload_minSizeError,emptyError:a.lang.upload_emptyError,limitError:a.lang.upload_limitError,onLeave:a.lang.upload_onLeave}}),o.find(".j-gallery-sortable").sortable({items:".j-gallery-image",start:function(e,t){t.item.addClass("moving")},stop:function(e,t){t.item.removeClass("moving")}})}function f(e,t,l,o){var r=d(e);switch(l){case"start":var n=r.find(".j-upload-button");n.before('<div class="publicator-gallery-item j-gallery-image" data-id="'+t+'"><div class="row"><div class="col-sm-2 publicator-photo j-photo-img"><div class="publicator-photo-progress"><img alt="" src="'+a.loader+'"></div></div><div class="col-sm-10"><div class="publicator-photo-description">'+c(i.gallery,e,a.lang.photo_tip,"","",{fieldnameExtra:"[p]["+t+"]"})+'</div><a href="#" class="ajax-link link-delete j-gallery-delete hidden"><i class="fa fa-times"></i> <span>'+a.lang["delete"]+"</span></a></div></div></div>");break;case"preview":var s=r.find('.j-gallery-image[data-id="'+t+'"]');s.append('<input type="hidden" name="'+p(i.gallery,e,!1,"[p]["+t+"]")+'" class="j-photo-content" value="'+o.filename+'" />'),s.find(".j-photo-img").html('<img src="'+o.t+'" alt="" />'),s.find(".j-gallery-delete").removeClass("hidden"),q.push([o.filename,i.gallery]);var v=Y[e];v.photos.push(o.filename);break;case"remove":r.find('.j-gallery-image[data-id="'+t+'"]').remove()}r.find(".j-gallery-sortable").sortable("refresh")}function h(e){for(var t in q)if(q[t][0]==e)return!0;return!1}function g(e){if(e.length&&q.length)if($.isArray(e))for(var t in q)for(var a in e)q[t][0]==e[a]&&q.splice(t,1);else for(var t in q)if(q[t][0]==e){q.splice(t,1);break}}function b(e,t,a,l){var o="";return o+='<input name="'+(H+"[b]["+a+"][source]")+'" type="hidden" value="'+t+'" class="video-source" />',l&&l.hasOwnProperty("embed")&&(o+='<input name="'+(H+"[b]["+a+"][embed]")+'" type="hidden" value="'+l.embed+'" class="video-embed-url" />'),l&&l.hasOwnProperty("thumb")&&(o+='<input name="'+(H+"[b]["+a+"][thumb]")+'" type="hidden" value="'+l.thumb+'" class="video-thumb-url" />'),"vk"==t?(-1==e.indexOf("video_ext.php")&&(e="http://vk.com/video_ext.php?"+e),'<div align="center"><iframe src="'+e+'" width="640" height="363" frameborder="0"></iframe>'+o+'                             <textarea name="'+p(i.video,a,!1)+'" style="display:none;" class="video-content">'+e+"</textarea>                             "+p(i.video,a,"type")+"</div>"):'<div align="center">                            <object width="640" height="363">                                <param name="allowfullscreen" value="true" />                                <param name="allowscriptaccess" value="always" />                                <param name="wmode" value="transparent" />                                <param name="movie" value="'+e+'" />                                <embed src="'+e+'" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" wmode="transparent" width="640" height="363"></embed>                            </object>'+o+'                            <textarea name="'+p(i.video,a,!1)+'" style="display:none;" class="video-content">'+e+"</textarea>                            "+p(i.video,a,"type")+"                        </div>"}function y(e,t,a){switch(e){case"subtitle-size":a=intval(a);var i=[2,3,4,5,6],l="";for(var o in i)l+='<option value="'+i[o]+'"'+(i[o]===a?" selected":"")+">H"+i[o]+"</option>";return'<select name="'+p(!1,t,"size")+'" class="form-control">'+l+"</select>"}return""}function j(e){e===!0?x.sortable("refresh"):x.sortable({items:".j-block",cancel:"input,textarea,button,select,option,.j-map-container",start:function(e,t){t.item.addClass("moving")},stop:function(e,t){if(t.item.removeClass("moving"),a.useWY){var i=intval($(t.item).data("id"));i&&E[i]&&E[i].reinitIframe()}}})}function k(e){var t=d(e);if(!O[e]||!O[e].init){O[e]={init:1,$addr:t.find(".j-map-addr:visible:first"),$lat:t.find(".j-map-lat"),$lon:t.find(".j-map-lon")};var a=O[e];O[e].map=app.map(t.find(".j-map-container").get(0),[a.$lat.val(),a.$lon.val()],function(t){O[e].mapEditor=bff.map.editor(),O[e].mapEditor.init({map:t,version:"2.1",coords:[a.$lat,a.$lon],address:a.$addr,addressKind:!1})},{zoom:13}),t.on("click",".j-map-search",function(t){t.preventDefault(),w(e)})}}function w(e){if(O[e]&&O[e].init){var t=O[e],a=$.trim(t.$addr.val());a&&t.lastQuery!=a&&t.mapEditor.search(t.lastQuery=a,!1,function(){t.mapEditor.centerByMarker()})}}o&&$.extend(a,o||{});var x,_,E=[],C=1,z=!1,H="pdata",D=!1,P=!1,S=!1,q=[],W=[],Y={},O={};a.fieldname&&(H=a.fieldname),a.m.use_wysiwyg?(a.m.photo_wysiwyg||(a.wyPhotos=!1),a.m.use_reformator&&(a.useReformator=!0)):a.useWY=a.wyPhotos=!1,a.langs!==!1&&(S=!0,P=a.langs_cur);var L=$(e)||null;if(!L)return t(a.lang.init_error);a.loader||(a.loader=app.rootStatic+"/img/loader.gif"),x=L.find(".j-blocks"),_=L.find(".j-controls"),_.find(".j-photo").css("vertical-align","bottom");new qq.FileUploaderBasic({button:_.find(".j-photo").get(0),sizeLimit:a.upload.maxSize,action:a.url+"img_upload&id="+a.id+"&block_type="+i.photo,multiple:!0,allowedExtensions:["jpeg","jpg","png","gif"],onSubmit:function(e){return u(e,"start",!1)},onComplete:function(e,a,i){return i&&i.success?u(e,"preview",i):i.errors&&(t(i.errors),u(e,"remove")),!0},onCancel:function(e){u(e,"remove")},showMessage:function(e){t(e)},messages:{typeError:a.lang.upload_typeError,sizeError:a.lang.upload_sizeError,minSizeError:a.lang.upload_minSizeError,emptyError:a.lang.upload_emptyError,limitError:a.lang.upload_limitError,onLeave:a.lang.upload_onLeave}});_.on("click",".j-text",function(e){e.preventDefault();var t=C,l='<div class="col-sm-9">'+c(i.text,t,a.lang.text_tip,"",a.useWY?"wy":"")+"</div>";n(i.text,l,!0),d(t).find("textarea:visible").focus(),z=!1,L.triggerHandler("event-controls-back")}),_.on("click",".j-textmd",function(e){e.preventDefault();var t=C,l='<div class="col-sm-9">'+c(i.textmd,t,a.lang.text_tip,"","form-control j-no-wy")+"</div>";n(i.textmd,l,!0),d(t).find("textarea:visible").focus(),z=!1,L.triggerHandler("event-controls-back")}),_.on("click",".j-gallery",function(e){e.preventDefault();var t=C;Y[t]={uploader:!1,photos:[],edit:!0,dyn:!0,items:null,bytesTotal:!1,uploaded:0,id_start:1};var l='<div class="col-sm-9 publicator-gallery j-gallery-sortable"><a class="btn btn-primary btn-sm j-upload-button" href="javascript:;">'+a.lang.photo_add+"</a></div>";n(i.gallery,l,!0),m(t),z=!1,L.triggerHandler("event-controls-back")}),_.on("click",".j-video",function(e){e.preventDefault();var t=C,l='<div class="col-sm-9 j-container">'+c(i.video,t,a.lang.video_tip,"","form-control no-enter j-video-url")+'<div class="help-block">'+a.lang.video_supported+'</div><a href="#" class="btn btn-primary btn-sm mrgb15 j-video-submit" data-id="'+t+'">'+a.lang.video_submit+"</a></div>";n(i.video,l,!1),d(t).find("textarea:visible").focus(),z=!1,L.triggerHandler("event-controls-back")}),_.on("click",".j-subtitle",function(e){e.preventDefault();var t=C,l='<div class="col-sm-9"><div class="row"><div class="col-sm-10">'+c(i.subtitle,t,a.lang.subtitle_tip,"","form-control no-enter j-no-wy")+'</div><div class="col-sm-2">'+y("subtitle-size",t,0)+"</div></div></div>";n(i.subtitle,l,!0),d(t).find("textarea:visible").focus(),z=!1,L.triggerHandler("event-controls-back")}),_.on("click",".j-map",function(e){e.preventDefault();var t=C,l='<div class="col-sm-9"><div class="row"><div class="col-sm-9">'+c(i.map,t,a.lang.map_tip,"","form-control no-enter j-no-wy j-map-addr")+'</div><div class="col-sm-3"><a href="javascript:;" class="btn btn-default btn-block j-map-search">'+a.lang.map_search+'</a></div></div><div class="l-mapView mrgt15 mrgb0"><div class="map-google j-map-container" style="height: 350px;"></div></div></div><input type="hidden" name="'+(H+"[b]["+t+"][lat]")+'" class="j-map-lat" value="'+a.map_def_lat+'"><input type="hidden" name="'+(H+"[b]["+t+"][lon]")+'" class="j-map-lon" value="'+a.map_def_lon+'">';n(i.map,l,!0),k(t),z=!1,L.triggerHandler("event-controls-back")}),L.on("focus focusin focusout blur keyup keydown","textarea",function(e){var t=$(this);switch(e.type){case"focus":case"focusin":a.useWY&&t.hasClass("wy")&&v(t.removeClass("wy"));break;case"blur":case"focusout":t.removeClass("active"),t.val().length&&!t.val().match(/^[\s\r\n]+$/)||t.val("").outerHeight(a.textHeight);break;case"keydown":if(t.hasClass("no-enter"))return 13!=e.keyCode;case"keyup":(!a.useWY||t.hasClass("j-no-wy")||!a.wyPhoto&&t.hasClass("photo"))&&(bff.browser.msie||t.height(0),t.innerHeight(t[0].scrollHeight))}}),L.on("click",".j-block-delete",function(e){e.preventDefault();var t=$(this).closest(".j-block"),l=intval(t.data("type")),o=intval(t.data("id"));if(l==i.photo){var r=$("input.j-photo-content",t);if(!r.length||!r.val())return void s(t);var n=r.val();if(h(n)){if(!confirm(a.lang.del))return;return void bff.ajax(a.url+"img_delete",{photos:[[n,l]],id:a.id},function(e){e&&e.success&&(g(n),s(t))})}}else if(l==i.gallery&&Y[o].dyn){var d=Y[o].photos;if(d.length>0){if(!confirm(a.lang.del))return;var c=[];for(var o in d)c.push([d[o],l]);bff.ajax(a.url+"img_delete",{photos:c,id:a.id},function(e){e&&e.success&&(g(d),delete Y[o],s(t))})}else delete Y[o],s(t);return}(l!=i.photo&&l!=i.gallery||confirm(a.lang.del))&&($(this).parent().append(p(l,o,"del")),s(t,!0))}),L.on("click",".j-block-up",function(e){e.preventDefault();var t=$(this).closest(".j-block"),i=t.prev(".j-block");if(i.length&&i.before(t),a.useWY){var l=intval(t.data("id"));l&&E[l]&&E[l].reinitIframe()}}),L.on("click",".j-block-down",function(e){e.preventDefault();var t=$(this).closest(".j-block"),i=t.next(".j-block");if(i.length&&i.after(t),a.useWY){var l=intval(t.data("id"));l&&E[l]&&E[l].reinitIframe()}}),L.on("click",".j-block-add",function(e){if(e.preventDefault(),z)return void L.triggerHandler("event-controls-back");var t=$(this).closest(".j-block");if(z=intval(t.data("id"))){var a=intval(t.offset().top)-(intval(x.offset().top)+intval(x.height()));_.animate({top:a},500)}}),L.on("event-controls-back",function(){z=!1,_.animate({top:0},500)}),L.on("click",".j-gallery-delete",function(e){if(e.preventDefault(),confirm(a.lang.del)){var t=$(this).closest(".j-gallery-image"),l=$(".j-photo-content",t).val(),o=t.closest(".j-block"),r=o.data("id");h(l)?bff.ajax(a.url+"img_delete",{photos:[[l,i.gallery]],id:a.id},function(e){if(e&&e.success){g(l);var a=Y[r];if(a.uploader.decrementUploaded(),a.photos.length)for(var i in a.photos)if(a.photos[i]==l){a.photos.splice(i,1);break}t.remove(),o.find(".j-gallery-sortable").sortable("refresh")}}):($(this).parent().append(p(i.gallery,r,"del","[p]["+t.data("id")+"]")),t.hide(),o.find(".j-gallery-sortable").sortable("refresh"),Y[r].uploader.decrementUploaded())}}),L.on("click",".j-video-submit",function(e){e.preventDefault();var i=$(this).data("id"),l=d(i),o=l.find(".j-video-url"),r=o.val()||"";return r.length?void bff.ajax(a.url+"video_validate",{url:r,id:a.id},function(e){e&&(e.correct?l.find(".j-container").html(b(e.url,e.source,i,e)):(t(a.lang.video_not_valid),o.focus()))}):void o.focus()}),L.on("click",".j-block-edit",function(e){e.preventDefault();var t=this,a=$(this).closest(".j-block"),l=intval(a.data("type"));switch(l){case i.text:case i.quote:case i.photo:var o=a.find(".text-to-wy");o.length&&!o.hasClass("hidden")?o.click():a.find("textarea:visible").focus();break;case i.gallery:a.find(".j-view").remove(),a.find(".j-edit").removeClass("hidden"),a.find("textarea").each(function(e,t){$(t).height(0),$(t).innerHeight(t.scrollHeight>0?t.scrollHeight:20)}),m(intval(a.data("id")))}t.remove()}),L.on("click",".text-to-wy",function(){var e=$(this).parent().find("textarea").css({height:$(this).height()}).removeClass("wy");a.useWY?v(e):(e.removeClass("hidden"),$(this).hide())});var U=!1;l.bind("beforeunload",function(){!U&&!D&&q.length>0&&(U=!0,bff.ajax(a.url+"img_delete",{photos:q,id:a.id},function(){},!1,{async:!1}))});var B=L.closest("form:first");return B.length&&B.submit(function(){D=!0}),r(),j(),{getContainer:function(){return L}}}function t(e,t){return app.alert?t?app.alert.success(e):app.alert.error(e):alert(e),!1}var a={m:{photo_wysiwyg:!1,photo_align:!1,photo_zoom:!1,gallery_photos_limit:0,gallery_inline:!1},url:"",id:0,fieldname:"",useWY:!0,useReformator:!1,wyPhotos:!0,langs:!1,textHeight:34,loader:"",upload:{maxSize:8388608},lang:{init_error:"init error"}},i={title:0,text:1,photo:2,video:3,subtitle:4,gallery:5,quote:6,map:7,textmd:8},l=$(window);return{init:e}}();